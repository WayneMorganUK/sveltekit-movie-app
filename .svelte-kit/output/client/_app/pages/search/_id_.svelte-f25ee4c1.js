import{a1 as f,S as d,i as h,s as l,w as k,x as y,y as b,q as c,o as p,B as j,l as u,g as S,p as w,d as q,J as m,n as B,I as M}from"../../chunks/vendor-035761c6.js";import{c as $,d as _,a as v}from"../../chunks/store-70017b87.js";import{M as C}from"../../chunks/MainSection-3ab32004.js";import{p as J}from"../../chunks/stores-60feb9bd.js";import"../../chunks/ProgressBar-6e1a97c1.js";function g(n){let o,s;return o=new C({props:{total_pages:n[0],searching:n[2]}}),{c(){k(o.$$.fragment)},l(e){y(o.$$.fragment,e)},m(e,t){b(o,e,t),s=!0},p(e,t){const a={};t&1&&(a.total_pages=e[0]),o.$set(a)},i(e){s||(c(o.$$.fragment,e),s=!0)},o(e){p(o.$$.fragment,e),s=!1},d(e){j(o,e)}}}function N(n){let o=n[1],s,e,t=g(n);return{c(){t.c(),s=u()},l(a){t.l(a),s=u()},m(a,r){t.m(a,r),S(a,s,r),e=!0},p(a,[r]){r&2&&l(o,o=a[1])?(B(),p(t,1,1,M),w(),t=g(a),t.c(),c(t),t.m(s.parentNode,s)):t.p(a,r)},i(a){e||(c(t),e=!0)},o(a){p(t),e=!1},d(a){a&&q(s),t.d(a)}}}async function z({fetch:n,params:o}){$.set(1);const s=await(await n("../api/postSearch",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({media:f(v),query:o.id,page:"1"})})).json();return _.set(await s.res.results),{props:{total_pages:await s.res.total_pages}}}function O(n,o,s){let e,t;m(n,J,i=>s(3,e=i)),m(n,_,i=>s(1,t=i));let{total_pages:a}=o,r=e.params.id;return n.$$set=i=>{"total_pages"in i&&s(0,a=i.total_pages)},[a,t,r]}class A extends d{constructor(o){super();h(this,o,O,N,l,{total_pages:0})}}export{A as default,z as load};

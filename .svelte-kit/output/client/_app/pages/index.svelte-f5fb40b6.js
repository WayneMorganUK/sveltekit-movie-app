import{S as d,i as g,s as l,w as k,x as h,y,q as c,o as i,B as b,l as p,g as j,p as w,d as S,J as m,P as v,n as M,I as P}from"../chunks/vendor-b506428e.js";import{d as u,c as $,s as _}from"../chunks/store-5c7cf519.js";import{M as q}from"../chunks/MainSection-15544e19.js";import"../chunks/ProgressBar-0e64a379.js";function f(r){let t,a;return t=new q({props:{total_pages:r[0]}}),{c(){k(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,s){y(t,e,s),a=!0},p(e,s){const o={};s&1&&(o.total_pages=e[0]),t.$set(o)},i(e){a||(c(t.$$.fragment,e),a=!0)},o(e){i(t.$$.fragment,e),a=!1},d(e){b(t,e)}}}function B(r){let t=r[1],a,e,s=f(r);return{c(){s.c(),a=p()},l(o){s.l(o),a=p()},m(o,n){s.m(o,n),j(o,a,n),e=!0},p(o,[n]){n&2&&l(t,t=o[1])?(M(),i(s,1,1,P),w(),s=f(o),s.c(),c(s),s.m(a.parentNode,a)):s.p(o,n)},i(o){e||(c(s),e=!0)},o(o){i(s),e=!1},d(o){o&&S(a),s.d(o)}}}async function E({fetch:r}){u.set(void 0),$.set(1);const t=await r("/api/getShow",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({media:"movie",page:"1"})}),a=await t.json();u.set(a.res.results);const e=await a.res.total_pages;return t.ok?{props:{total_pages:e}}:{status:t.status,error:new Error("failure to communicate")}}function C(r,t,a){let e,s;m(r,_,n=>a(2,e=n)),m(r,u,n=>a(1,s=n));let{total_pages:o}=t;return v(_,e=null,e),r.$$set=n=>{"total_pages"in n&&a(0,o=n.total_pages)},[o,s]}class I extends d{constructor(t){super();g(this,t,C,B,l,{total_pages:0})}}export{I as default,E as load};

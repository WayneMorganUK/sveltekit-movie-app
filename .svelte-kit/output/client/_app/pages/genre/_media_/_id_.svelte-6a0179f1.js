import{S as d,i as k,s as p,w as h,x as y,y as b,q as c,o as l,B as w,l as _,g as S,p as j,d as B,J as m,R as M,n as q,I as C}from"../../../chunks/vendor-035761c6.js";import{c as J,d as u,a as N,s as g}from"../../../chunks/store-70017b87.js";import{M as O}from"../../../chunks/MainSection-3ab32004.js";import"../../../chunks/ProgressBar-6e1a97c1.js";function f(o){let s,a;return s=new O({props:{total_pages:o[0],genres:o[1]}}),{c(){h(s.$$.fragment)},l(e){y(s.$$.fragment,e)},m(e,t){b(s,e,t),a=!0},p(e,t){const n={};t&1&&(n.total_pages=e[0]),t&2&&(n.genres=e[1]),s.$set(n)},i(e){a||(c(s.$$.fragment,e),a=!0)},o(e){l(s.$$.fragment,e),a=!1},d(e){w(s,e)}}}function P(o){let s=o[2],a,e,t=f(o);return{c(){t.c(),a=_()},l(n){t.l(n),a=_()},m(n,r){t.m(n,r),S(n,a,r),e=!0},p(n,[r]){r&4&&p(s,s=n[2])?(q(),l(t,1,1,C),j(),t=f(n),t.c(),c(t),t.m(a.parentNode,a)):t.p(n,r)},i(n){e||(c(t),e=!0)},o(n){l(t),e=!1},d(n){n&&B(a),t.d(n)}}}const R=!0;async function U({fetch:o,params:s}){J.set(1),u.set(void 0);const a=s.id;N.set(s.media);const e=await(await o("../../api/postShowGenre",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({media:s.media,genre:a,page:"1"})})).json();return u.set(await e.res.results),{props:{total_pages:await e.res.total_pages,genres:a}}}function T(o,s,a){let e,t;m(o,g,i=>a(3,e=i)),m(o,u,i=>a(2,t=i));let{total_pages:n}=s,{genres:r}=s;return M(g,e=null,e),o.$$set=i=>{"total_pages"in i&&a(0,n=i.total_pages),"genres"in i&&a(1,r=i.genres)},[n,r,t]}class z extends d{constructor(s){super();k(this,s,T,P,p,{total_pages:0,genres:1})}}export{z as default,U as load,R as prerender};
